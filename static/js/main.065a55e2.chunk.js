(this["webpackJsonpgame-in-dots"]=this["webpackJsonpgame-in-dots"]||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports=n(18)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(6),o=n.n(c),u=n(7),s=n(1),l=n(4),i=function(e,t){return Math.floor(e+Math.random()*(t+1-e))},m=function(e){var t=e.gameSettings.gameSquares;(0,e.changeGameSettings)(t.map((function(e){return r.a.Children.forEach(e.props.children,(function(t,n){e.props.children[n]=r.a.cloneElement(t,{className:""})})),r.a.cloneElement(e)})))},p=function(e){var t=e.gameSettings,n=t.mode,a=t.modes,c=t.playersScore,o=t.userName,u=t.gameSquares,s=e.changeGameSettings,l=e.changeWinner;console.log(c);var i=a[n].field*a[n].field/2;c.computer>i||c.user>i?c.computer>c.user?l("Computer"):l(o):setTimeout((function(){var e="nobody",t=u.map((function(t){return r.a.Children.forEach(t.props.children,(function(n,a){"blue"===n.props.className&&(t.props.children[a]=r.a.cloneElement(n,{className:"red"}),e="computer")})),r.a.cloneElement(t)}));f(t,a[n].field,c),s(t,e)}),a[n].delay)},f=function(e,t,n){var a=t*t/2;if(n.computer+1<=a&&n.user+1<=a){for(var c=i(0,t-1),o=i(0,t-1);""!==e[c].props.children[o].props.className;)c=i(0,t-1),o=i(0,t-1);e[c].props.children[o]=r.a.cloneElement(e[c].props.children[o],{className:"blue"})}},d=function(e){e.gameSettings.winner?m(e):p(e)},g=(n(13),function(e){var t=e.gameSettings,n=e.handleInput,a=e.handleSelect;return r.a.createElement("section",{className:"game-setting-panel"},r.a.createElement("select",{value:t.mode,onChange:function(e){return a(e.target.value)}},r.a.createElement("option",{value:""},"Pick game mode \u25be"),r.a.createElement("option",{value:"easyMode"},"Easy mode"),r.a.createElement("option",{value:"normalMode"},"Normal mode"),r.a.createElement("option",{value:"hardMode"},"Hard mode")),r.a.createElement("input",{type:"text",placeholder:"Enter your name",value:t.userName,onChange:function(e){return n(e.target.value)}}),r.a.createElement("button",{onClick:function(){return d(e)},disabled:!t.mode||!t.userName},t.winner?"PLAY AGAIN":"PLAY"))}),h=(n(14),function(e){var t=e.text;return r.a.createElement("section",{className:"message"},r.a.createElement("p",null,t))}),E=(n(15),function(e){var t=e.gameSquares,n=e.handleSquareClick;return r.a.createElement("section",{className:"game-field"},r.a.createElement("table",{onClick:function(e){return n(e.target.getAttribute("data-id"))}},r.a.createElement("tbody",null,t)))}),S=(n(16),function(e){var t=e.winners;return r.a.createElement("section",{className:"leader-board"},r.a.createElement("h2",null,"Leader Board"),r.a.createElement("ul",null,t.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",null,e.winner),r.a.createElement("span",null,e.date))}))))});n(17);var b=function(){var e=Object(a.useState)({mode:"",userName:"",gameSquares:[],playersScore:{user:0,computer:0},winner:"",step:0}),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)([]),i=Object(l.a)(o,2),m=i[0],p=i[1],f=function(e,t){t||c((function(t){return Object(s.a)({},t,{gameSquares:e,playersScore:{user:0,computer:0},winner:"",step:0})})),"nobody"===t&&c((function(t){return Object(s.a)({},t,{gameSquares:e,step:t.step+1})})),"computer"===t&&c((function(t){return Object(s.a)({},t,{gameSquares:e,playersScore:Object(s.a)({},t.playersScore,{computer:t.playersScore.computer+1}),step:t.step+1})})),"user"===t&&c((function(t){return Object(s.a)({},t,{gameSquares:e,playersScore:Object(s.a)({},t.playersScore,{user:t.playersScore.user+1})})}))},b=function(e){if(c(Object(s.a)({},n,{winner:e})),e){var t=new Date,a=t.getMinutes()>9?t.getMinutes():"0".concat(t.getMinutes()),r=t.getHours()>9?t.getHours():"0".concat(t.getHours()),o=t.getDate()>9?t.getDate():"0".concat(t.getDate()),l=t.getMonth()>9?t.getMonth()+1:"0".concat(t.getMonth()+1),i="".concat(r,":").concat(a,"; ").concat(o,".").concat(l,".").concat(t.getFullYear());p([].concat(Object(u.a)(m),[{winner:e,date:i}]))}};return Object(a.useEffect)((function(){fetch("https://starnavi-frontend-test-task.herokuapp.com/game-settings").then((function(e){return e.json()})).then((function(e){return c(Object(s.a)({},n,{modes:e}))}))}),[]),Object(a.useEffect)((function(){fetch("https://starnavi-frontend-test-task.herokuapp.com/winners").then((function(e){return e.json()})).then((function(e){return p(e)}))}),[]),Object(a.useEffect)((function(){n.winner&&fetch("https://starnavi-frontend-test-task.herokuapp.com/winners",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(m[m.length-1])})}),[m]),Object(a.useEffect)((function(){n.mode&&d({gameSettings:n,changeGameSettings:f,changeWinner:b})}),[n.step]),r.a.createElement("article",{className:"game-page"},r.a.createElement("div",{className:"game"},r.a.createElement(g,{gameSettings:n,handleInput:function(e){c((function(t){return Object(s.a)({},t,{userName:e})}))},handleSelect:function(e){var t=[],a=[];if(e)for(var o=0;o<n.modes[e].field;o++){t[o]=[];for(var u=0;u<n.modes[e].field;u++)t[o][u]=r.a.createElement("td",{key:u,"data-id":"".concat(o).concat(u),className:""});a.push(r.a.createElement("tr",{key:o},t[o]))}c((function(t){return Object(s.a)({},t,{mode:e,gameSquares:a,playersScore:{user:0,computer:0},winner:""})}))},changeGameSettings:f,changeWinner:b}),r.a.createElement(h,{text:n.winner?"".concat(n.winner," won!"):""}),r.a.createElement(E,{gameSquares:n.gameSquares,handleSquareClick:function(e){var t="",a=n.gameSquares.map((function(n,a){return r.a.Children.forEach(n.props.children,(function(c,o){"blue"===c.props.className&&e==="".concat(a).concat(o)&&(n.props.children[o]=r.a.cloneElement(c,{className:"green"}),t="user")})),r.a.cloneElement(n)}));"user"===t&&f(a,t)}})),r.a.createElement(S,{winners:m}))};var v=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(b,null))};o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root"))}],[[8,1,2]]]);
//# sourceMappingURL=main.065a55e2.chunk.js.map